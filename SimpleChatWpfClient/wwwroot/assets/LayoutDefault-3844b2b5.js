import{u as l,V,v as r,a as P}from"./index-bc05f82b.js";import{g as _,c as e,m as b,o as d,a as y,w as a,u as s,b as f,d as B,F as x,e as I,p as w,f as D,h as $,i as L,r as S,j as v,k as N,t as O}from"./index-7e0ef185.js";import{m as F,V as M}from"./VToolbar-23df3aee.js";import{u as k,m as U,a as R,c as j}from"./tag-1a61e89d.js";import{V as m}from"./VBtn-3a8c1ea3.js";import{V as E,a as H}from"./VDialog-d6d23d6c.js";import{V as K}from"./forwardRefs-f0d558be.js";import{V as q}from"./VMenu-b22d60c4.js";import{V as z,a as g}from"./VList-c42ec69f.js";import{V as G}from"./VAppBar-8016847f.js";import{V as J,a as Q,b as W}from"./VCard-4320fbb2.js";import"./_commonjsHelpers-042e6b4d.js";import"./VOverlay-c00d4473.js";const X=_()({name:"VAppBarTitle",props:F(),setup(u,i){let{slots:t}=i;return k(()=>e(M,b(u,{class:"v-app-bar-title"}),t)),{}}}),Y={__name:"AppBar",setup(u){return(i,t)=>(d(),y(G,{flat:"",color:"primary"},{default:a(()=>[e(X,null,{default:a(()=>[e(m,{icon:"",onClick:t[0]||(t[0]=o=>s(l).router.goToMain())},{default:a(()=>[e(V,{icon:"mdi-circle-slice-4"})]),_:1}),f(" SimpleChat ")]),_:1}),e(E),s(r).state.userProfile!=null?(d(),B(x,{key:0},[e(m,{icon:"",onClick:t[1]||(t[1]=o=>s(l).router.goToSearch())},{default:a(()=>[e(V,null,{default:a(()=>[f("mdi-magnify")]),_:1})]),_:1}),e(m,{icon:""},{default:a(()=>[e(K,null,{default:a(()=>[e(P,{src:s(l).info.getAvatar(s(r).state.userProfile.avatar),alt:"User"},null,8,["src"])]),_:1}),e(q,{activator:"parent"},{default:a(()=>[e(z,null,{default:a(()=>[e(g,{onClick:t[2]||(t[2]=o=>s(l).router.goToMyProfile()),title:"个人主页"}),e(g,{onClick:t[3]||(t[3]=o=>s(l).router.goToAuth()),title:"回到登陆页"})]),_:1})]),_:1})]),_:1})],64)):I("",!0)]),_:1}))}};const Z=w({...U(),...R({fullHeight:!0}),...D()},"VApp"),ee=_()({name:"VApp",props:Z(),setup(u,i){let{slots:t}=i;const o=$(u),{layoutClasses:n,layoutStyles:p,getLayoutItem:A,items:C,layoutRef:T}=j(u),{rtlClasses:h}=L();return k(()=>{var c;return e("div",{ref:T,class:["v-application",o.themeClasses.value,n.value,h.value,u.class],style:[p.value,u.style]},[e("div",{class:"v-application__wrap"},[(c=t.default)==null?void 0:c.call(t)])])}),{getLayoutItem:A,items:C,theme:o}}}),te={class:"text-center"},Ve={__name:"LayoutDefault",setup(u){async function i(){let t=l.auth.loadAuthInfo(),o=!1;if(t&&(o=await l.auth.verifyAuthInfo()),!t||!o||r.state.userId==-1){v.push("/auth");return}l.api.user.getUserProfile(r.state.userId).then(n=>{n.isOk&&(r.state.userProfile=n.value),r.state.userProfile.isBanned&&(l.tool.toast("您已被封禁, 请联系管理员"),v.push("/auth"))})}return i(),(t,o)=>{const n=S("router-view");return d(),y(ee,{class:"bg-grey-lighten-5"},{default:a(()=>[e(Y),e(n),N("div",te,[e(H,{modelValue:s(r).state.globalDialog,"onUpdate:modelValue":o[1]||(o[1]=p=>s(r).state.globalDialog=p),width:"auto"},{default:a(()=>[e(J,null,{default:a(()=>[e(Q,null,{default:a(()=>[f(O(s(r).state.globalDialogText),1)]),_:1}),e(W,null,{default:a(()=>[e(m,{color:"primary",block:"",onClick:o[0]||(o[0]=p=>s(r).state.globalDialog=!1)},{default:a(()=>[f(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}}};export{Ve as default};
