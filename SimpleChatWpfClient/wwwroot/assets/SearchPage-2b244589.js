import{l as m,o as r,a as s,w as a,c as t,b as u,J as T,d as k,I as _,F as g,e as C,u as i}from"./index-7e0ef185.js";import{u as l}from"./index-bc05f82b.js";import{V as w}from"./VMain-ffc5ac57.js";import{V as x,c as L,a as N}from"./VCard-4320fbb2.js";import{V as F,a as d,b as y,d as b}from"./VList-c42ec69f.js";import{V as P}from"./VTextField-c1b0e354.js";import{V as U}from"./VContainer-e7ac744a.js";import"./_commonjsHelpers-042e6b4d.js";import"./tag-1a61e89d.js";import"./forwardRefs-f0d558be.js";const M={__name:"SearchPage",setup($){const o=m(""),f=m(!1),p=m([]),v=m([]);async function c(){f.value=!0;const V=l.api.user.searchUsers(o.value).then(e=>{e.isOk?p.value=e.value:l.tool.toast(e.message)}),n=l.api.group.searchGroups(o.value).then(e=>{e.isOk?v.value=e.value:l.tool.toast(e.message)});await Promise.all([V,n]),f.value=!1}return(V,n)=>(r(),s(w,null,{default:a(()=>[t(U,null,{default:a(()=>[t(x,null,{default:a(()=>[t(L,null,{default:a(()=>[u(" 搜索 ")]),_:1}),t(N,null,{default:a(()=>[t(F,null,{default:a(()=>[t(d,null,{default:a(()=>[t(P,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e),loading:f.value,"append-icon":o.value?"mdi-magnify":null,label:"Search templates",class:"m-2","single-line":"","onClick:append":n[1]||(n[1]=e=>c()),onKeydown:n[2]||(n[2]=T(e=>c(),["enter"]))},null,8,["modelValue","loading","append-icon"])]),_:1}),t(y,null,{default:a(()=>[u(" 用户 ")]),_:1}),(r(!0),k(g,null,_(p.value,e=>(r(),s(d,{key:e.id,title:i(l).info.getUserFullDisplayName(e.userName,e.nickname),subtitle:e.id,"prepend-avatar":i(l).info.getAvatar(e.avatar),onClick:h=>i(l).router.goToUserProfile(e.id)},null,8,["title","subtitle","prepend-avatar","onClick"]))),128)),p.value.length==0?(r(),s(d,{key:0},{default:a(()=>[t(b,null,{default:a(()=>[u("没有找到用户")]),_:1})]),_:1})):C("",!0),t(y,null,{default:a(()=>[u(" 群组 ")]),_:1}),(r(!0),k(g,null,_(v.value,e=>(r(),s(d,{key:e.id,title:e.name,subtitle:e.id,"prepend-avatar":i(l).info.getAvatar(e.avatar),onClick:h=>i(l).router.goToGroupProfile(e.id)},null,8,["title","subtitle","prepend-avatar","onClick"]))),128)),v.value.length==0?(r(),s(d,{key:1},{default:a(()=>[t(b,null,{default:a(()=>[u("没有找到群组")]),_:1})]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{M as default};
