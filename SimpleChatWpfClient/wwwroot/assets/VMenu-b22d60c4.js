import{b as h,u as k,V as v,c as m}from"./VOverlay-c00d4473.js";import{f as A}from"./forwardRefs-f0d558be.js";import{p as S,Y as O,g as T,B as U,Z as x,n as p,l as K,O as R,s as E,U as I,v as $,m as y,c as V,_ as g}from"./index-7e0ef185.js";import{b as j}from"./VDialog-d6d23d6c.js";import{k as B}from"./index-bc05f82b.js";import{u as F}from"./tag-1a61e89d.js";const N=S({id:String,...O(h({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:j}}),["absolute"])},"VMenu"),J=T()({name:"VMenu",props:N(),emits:{"update:modelValue":a=>!0},setup(a,w){let{slots:n}=w;const r=U(a,"modelValue"),{scopeId:P}=k(),D=x(),c=p(()=>a.id||`v-menu-${D}`),l=K(),o=R(v,null),u=E(0);I(v,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(r.value=!1,o==null||o.closeParents())},40)}}),$(r,e=>{e?o==null||o.register():o==null||o.unregister()});function b(){o==null||o.closeParents()}function C(e){var t,s;a.disabled||e.key==="Tab"&&(r.value=!1,(s=(t=l.value)==null?void 0:t.activatorEl)==null||s.focus())}function d(e){var s;if(a.disabled)return;const t=(s=l.value)==null?void 0:s.contentEl;t&&r.value?e.key==="ArrowDown"?(e.preventDefault(),g(t,"next")):e.key==="ArrowUp"&&(e.preventDefault(),g(t,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(r.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>d(e))))}const M=p(()=>y({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":c.value,onKeydown:d},a.activatorProps));return F(()=>{const[e]=m.filterProps(a);return V(m,y({ref:l,class:["v-menu",a.class],style:a.style},e,{modelValue:r.value,"onUpdate:modelValue":t=>r.value=t,absolute:!0,activatorProps:M.value,"onClick:outside":b,onKeydown:C},P),{activator:n.activator,default:function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return V(B,{root:"VMenu"},{default:()=>{var f;return[(f=n.default)==null?void 0:f.call(n,...s)]}})}})}),A({id:c,Î¨openChildren:u},l)}});export{J as V};
